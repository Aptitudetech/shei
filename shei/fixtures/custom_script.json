[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2019-12-17 11:17:27.979229", 
  "name": "Customer-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "\n\n$.extend(erpnext.utils, {\n        set_party_dashboard_indicators: function(frm){\n                if (frm.doc.__onload && frm.doc.__onload.dashboard_info){\n                        var info = frm.doc.__onload.dashboard_info;\n                        frm.dashboard.add_indicator(__('Last Year Billing: {0}',\n                                [format_currency(info.billing_last_year, info.currency)]), 'blue')\n\t\t\tfrm.dashboard.add_indicator(__('This Year Billing: {0}',\n                                [format_currency(info.billing_this_year, info.currency)]), 'blue')\n                        frm.dashboard.add_indicator(__('Total Unpaid: {0}',\n                                [format_currency(info.total_unpaid, info.currency)]),\n                                info.total_unpaid ? 'orange': 'green');\n                }\n        }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Quotation", 
  "modified": "2019-12-17 11:37:35.502375", 
  "name": "Quotation-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "\nfrappe.ui.form.on('Price Configurator Item', {\n\tbefore_panel_list_remove: function(frm, cdt, cdn) {\n   \t    var deleted_row = frappe.get_doc(cdt, cdn);\n\t    var filtered = cur_frm.doc.items.filter(elem => elem['reference_panel'] == deleted_row['panel_id']);\n\t    filtered.forEach(function(element) {\n\t\tfrappe.model.remove_from_locals('Quotation Item', element.name);\n\t    });\n\t    refresh_field(\"items\");\n\t},\n\taluminum_item: function(frm, cdt, cdn){\n        var d = locals[cdt][cdn];\n        if (!d.aluminum_item) return;\n\t\tif(d.panel_id == null || d.panel_id.value.length == 0){\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"shei.sheipy.set_panel_uuid\",\n\t\t\t\targs:{},\n        \t\tcallback: function(r) {\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"panel_id\", r.message);\n\t\t\t}\n      \t\t})\n\t}\n    },\n});\n\n\nfrappe.ui.form.on(\"Quotation Item\", {\n\titem_code: function(frm, cdt, cdn) {\n\t\tvar ct = locals[cdt][cdn];\n\t\tsetTimeout(function(){\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"multilingual_extension.item_description.fetch_item_description\",\n\t\t\t\targs:{\n\t\t\t\t\tparty_name: frm.doc.party_name,\n\t\t\t\t\tquotation_to: frm.doc.quotation_to,\n\t\t\t\t\titem_code: ct.item_code,\n\t\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"description\", r.message);\n\t\t\t\t}\n\t\t\t})\n\t\t}, 1000);\n\t}\n});\n\nfrappe.ui.form.on('Quotation', {\n    display_lost_reason: function(frm){\n        let dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Set as Lost\"),\n\t\t\tfields: [\n\t\t\t\t{\"fieldname\": 'lost_reason', 'fieldtype': 'Link',  'options': 'Lost Reason', 'reqd': 1, label: __(\"Lost Reason\")},\n\t\t\t\t{'fieldname': 'other_reason', fieldtype: 'Small Text', label: __('Other Reason'), 'depends_on': \"eval:doc.lost_reason === 'RL0008'\"}\n\t\t\t],\n\t\t\tprimary_action: function() {\n\t\t\t\tvar values = dialog.get_values();\n\t\t\t\tlet reason_description = frappe.db.get_value(\"Lost Reason\", values[\"lost_reason\"], 'lost_reason');\n\n\t\t\t\treason_description.then(function(value){\n\t\t\t\t\tlet lost_reason = value['message']['lost_reason'];\n\t\t\t\t\tlet full_reason = lost_reason;\n\t\t\t\t\tif(values[\"lost_reason\"] == 'RL0008'){\n\t\t\t\t\t\tif(values[\"other_reason\"] == null ){\n\t\t\t\t\t\t\tfrappe.throw(\"You must write a reason before proceeding\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tfull_reason = full_reason + \" - \" + values[\"other_reason\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfrm.call({\n\t\t\t\t\t\tmethod: 'declare_order_lost',\n\t\t\t\t\t\tdoc: frm.doc,\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t'reason': full_reason\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\t\tfrm.reload_doc();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\trefresh_field(\"quote_lost_reason\");\n\t\t\t\t});\n\t\t\t},\n\t\t\tprimary_action_label: __('Declare Lost')\n\t\t});\n\n\t\tdialog.show();\n\t\tdialog.get_input('lost_reason').on('awesomplete-selectcomplete', function(e){\n\t\t\tsetTimeout(function(){\n        \t\t\tdialog.refresh();\n    \t\t\t}, 500);\n\t\t});\n    }\n});\n//Will overwrite the QuotationController - used to change 'Set as lost' button behavior\nerpnext.selling.CustomQuotationController = erpnext.selling.QuotationController.extend({\n    refresh: function(doc, dt, dn) {\n\t\tthis._super(doc, dt, dn);\n\t\t//the button should only be available if the quote is 'Submit'\n\t\tif(doc.docstatus == 1 && doc.status!=='Lost') {\n\t\t\tif(doc.status!==\"Ordered\") {\n\t\t\t\tthis.frm.remove_custom_button(__('Set as Lost'));\n\t\t\t\tthis.frm.add_custom_button(__('Set as Lost'), () => {\n\t\t\t\t\tthis.frm.trigger('display_lost_reason');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});\ncur_frm.script_manager.make(erpnext.selling.CustomQuotationController);\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2019-12-17 11:15:45.495929", 
  "name": "Sales Invoice-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "\n\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Payment Entry", 
  "modified": "2019-12-17 11:11:06.119392", 
  "name": "Payment Entry-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Project", 
  "modified": "2019-12-17 11:17:05.339407", 
  "name": "Project-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "frappe.ui.form.on('Project Task', {\n    status: function(frm, cdt, cdn){\n        var d = locals[cdt][cdn];\n        if (!d.status) return;\n\tif(d.status == \"Closed\"){\n\t        frappe.model.set_value(cdt, cdn, 'end_date', frappe.datetime.get_today());\n\t}\n    }\n});\n\nfrappe.ui.form.on('Crate Information', {\n    crate_gross_weight: function(frm, cdt, cdn){\n        var d = locals[cdt][cdn];\n        if (!d.crate_gross_weight) return;\n        frappe.model.set_value(cdt, cdn, 'crate_net_weight', d.crate_gross_weight - 100);\n    }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Invoice", 
  "modified": "2019-12-17 11:10:14.249581", 
  "name": "Purchase Invoice-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Stock Entry", 
  "modified": "2019-12-17 11:09:38.429338", 
  "name": "Stock Entry-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Terms and Conditions Multilingual Extension", 
  "modified": "2019-12-17 11:08:30.735238", 
  "name": "Terms and Conditions Multilingual Extension-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2019-12-17 10:26:45.901914", 
  "name": "Sales Order-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Supplier", 
  "modified": "2017-11-15 12:28:36.607694", 
  "name": "Supplier-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "$.extend(erpnext.utils, {\n        set_party_dashboard_indicators: function(frm){\n                if (frm.doc.__onload && frm.doc.__onload.dashboard_info){\n                        var info = frm.doc.__onload.dashboard_info;\n                        frm.dashboard.add_indicator(__('Last Year Billing: {0}',\n                                [format_currency(info.billing_last_year, info.currency)]), 'blue')\n\t\t\tfrm.dashboard.add_indicator(__('This Year Billing: {0}',\n                                [format_currency(info.billing_this_year, info.currency)]), 'blue')\n                        frm.dashboard.add_indicator(__('Total Unpaid: {0}',\n                                [format_currency(info.total_unpaid, info.currency)]),\n                                info.total_unpaid ? 'orange': 'green');\n                }\n        }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Bank Account", 
  "modified": "2019-12-17 11:07:48.475246", 
  "name": "Bank Account-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Delivery Note", 
  "modified": "2019-06-27 17:39:03.537978", 
  "name": "Delivery Note-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "/*frappe.ui.form.on('Crate Information', {\n    crate_gross_weight: function(frm, cdt, cdn){\n        var d = locals[cdt][cdn];\n        if (!d.crate_gross_weight) return;\n        frappe.model.set_value(cdt, cdn, 'crate_net_weight', d.crate_gross_weight - 100);\n    }\n});*/", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Address", 
  "modified": "2019-12-16 13:50:21.592041", 
  "name": "Address-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "", 
  "script_type": "Client"
 }
]